# Quote Extractor & Random Quote Tool

Этот проект на Go позволяет:

1. Извлекать яркие цитаты из текстовых файлов с использованием модели **Gemini** от Google.
2. Сохранять цитаты вместе с контекстом (2 предложения до и после) в CSV-файлы.
3. Получать случайные цитаты из всех CSV-файлов в указанной папке.

---

## Структура проекта

├── main.go               # Основной скрипт для извлечения цитат из текстов
├── random_quote.go       # Скрипт для выбора случайной цитаты из CSV
├── rund/                 # Папка для текстовых файлов (например)
└── README.md


---

## Требования

- Go 1.21+  
- Аккаунт с доступом к Google Gemini API  
- Установленный `GOOGLE_API_KEY` в переменных окружения  

```bash
export GOOGLE_API_KEY="ваш_ключ_от_Google_Gemini"
```

---

## Использование

### 1. Извлечение цитат из текста

Скрипт `main.go` принимает текстовый файл и имя автора, извлекает цитаты через AI и сохраняет их в CSV:

```bash
go run main.go <путь_к_файлу.txt> "<Автор>"
```

Пример:

```bash
go run main.go rund/war_and_peace.txt "Лев Толстой"
```

После выполнения будет создан файл CSV с именем `war_and_peace.csv` с колонками:

* Цитата
* Автор
* Контекст (До)
* Контекст (После)

Скрипт автоматически разбивает текст на предложения, извлекает цитаты через AI и сохраняет их с контекстом.

---

### 2. Получение случайной цитаты

Скрипт `random_quote.go` выбирает случайную цитату из всех CSV-файлов в указанной папке (рекурсивно):

```bash
go run rand/random_quote.go <путь_к_папке>
```

Пример:

```bash
go run rand/random_quote.go .
```



Вывод:

```
Цитата: "Ни одна великая цель не достигается без борьбы."
Автор: "Лев Толстой"
Контекст (До): "… предыдущие предложения …"
Контекст (После): "… следующие предложения …"
```

либо 


```bash
go run rand/random_quote.go --json <путь_к_папке>
```

Пример:

```bash
go run rand/random_quote.go --json .
```
```json
{
  "Text": "Ни одна великая цель не достигается без борьбы.",
  "Author": "Лев Толстой",
  "ContextBefore": "… предыдущие предложения …",
  "ContextAfter": "… следующие предложения …"
}
```
---

## Функциональные возможности

* **AI-цитаты**: Генерация 3–10 ярких цитат из текста с помощью Google Gemini.
* **Контекст**: Для каждой цитаты сохраняются 2 предложения до и после.
* **CSV-совместимость**: Файлы совместимы с Excel и Google Sheets (UTF-8 с BOM, разделитель `;`).
* **Рандомная выборка**: Можно выбирать случайные цитаты из всей базы CSV-файлов.
* **Обработка больших текстов**: Текст делится на блоки (по ~3000 символов) для безопасной работы с AI.

---

## Примечания

* В CSV все `;` внутри текста заменяются на `,`, чтобы не ломать формат.
* Переносы строк внутри цитат заменяются на пробелы.
* Скрипт учитывает сокращения и точки внутри скобок при разбиении на предложения.

---

## Лицензия

Мы предоставляем наш код под лицензией MIT. При его повторном использовании, пожалуйста, укажите нас в разделе "ReadMe" и в благодарностях вашего проекта.

Если вы используете наши базы данных, просим вас отметить нас в описании проекта, в подвале сайта, в описании бота или в приветственном сообщении, в зависимости от того, где это будет наиболее уместно.
